(this.webpackJsonptaxi_schedule=this.webpackJsonptaxi_schedule||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},118:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(31),i=n.n(r),o=(n(104),n(105),n(153)),d=n(164),l=n(24),s=n(22),u=n(40),j=Object(u.c)({name:"editDailyScheduleModal",initialState:{open:!1},reducers:{setEditDailyScheduleModalSliceState:function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}}}),b=j.actions.setEditDailyScheduleModalSliceState,h=j.reducer,O=n(83),v=n(161),x=n(162),f=n(165),m=n(166),p=n(167),g=n(168),S=n(158),y=n(163),C=n(169),D=n(170),N=n(4);function w(e){var t=e.selectedDriverId,n=void 0===t?null:t,a=e.driverOptions,c=e.selectedStatusId,r=void 0===c?null:c,i=e.statusOptions,o=Object(O.a)(e,["selectedDriverId","driverOptions","selectedStatusId","statusOptions"]);return Object(N.jsxs)(v.a,Object(l.a)(Object(l.a)({},o),{},{children:[Object(N.jsx)(x.a,{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),Object(N.jsx)(f.a,{children:Object(N.jsxs)(m.a,{children:[Object(N.jsxs)(p.a,{children:[Object(N.jsx)(g.a,{children:"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"}),Object(N.jsx)(S.a,{value:n,children:a&&a.map((function(e){return Object(N.jsx)(y.a,{value:e.id,children:e.name})}))})]}),Object(N.jsxs)(p.a,{children:[Object(N.jsx)(g.a,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(N.jsx)(S.a,{value:r,children:i&&i.map((function(e){return Object(N.jsx)(y.a,{value:e.id,children:e.name})}))})]})]})}),Object(N.jsxs)(C.a,{children:[Object(N.jsx)(D.a,{variant:"contained",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(N.jsx)(D.a,{onClick:function(){return o.onClose&&o.onClose({},"backdropClick")},children:"\u041d\u0430\u0437\u0430\u0434"})]})]}))}var k=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e.editDailyScheduleModal}));return Object(N.jsx)(w,Object(l.a)(Object(l.a)({},e),{},{open:n.open,onClose:function(){t(b({open:!1}))}}))},I={vehicles:[{id:0,name:"Volkswagen Polo"},{id:1,name:"Volkswagen Polo"},{id:2,name:"Volkswagen Passat"}],drivers:[{id:0,name:"Driver 1"},{id:1,name:"Driver 2"}],scheduleScheme:[{date:"2021-02-25",schedule:[{driverId:0,vehicleId:0}]},{date:"2021-02-26",schedule:[{driverId:1,vehicleId:1}]},{date:"2021-02-27",schedule:[{driverId:1,vehicleId:2}]}]},M=n(10),R=n(171),W=n(172),z=n(173),T=n(154),F=n(174),L=n(175),P=Object(o.a)((function(e){return{root:{display:"flex",flexFlow:"column",backgroundColor:"".concat(e.palette.grey[300]," !important")},driverNameRow:{height:32,"&:first-child":{borderBottom:"1px solid ".concat(e.palette.grey[400])},display:"flex",justifyContent:"center",alignItems:"center"},driverName:{padding:"0 4px",borderRadius:4,fontWeight:500,background:e.palette.grey[500],whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:70}}}));function A(e){var t=e.driver,n=e.isMainDriver,a=void 0===n||n,c=P();return Object(N.jsxs)(d.a,{className:c.root,children:[Object(N.jsx)("div",{className:c.driverNameRow,children:a&&Object(N.jsx)("span",{className:c.driverName,children:null===t||void 0===t?void 0:t.name})}),Object(N.jsx)("div",{className:c.driverNameRow,children:!a&&Object(N.jsx)("span",{className:c.driverName,children:null===t||void 0===t?void 0:t.name})})]})}var B=n(17),E=n.n(B),Y=n(87),V=n.n(Y),J=Object(o.a)((function(e){return{root:{padding:"20px 0",marginLeft:200,position:"relative","& .MuiTableCell-root":{borderBottom:"none"}},tableRoot:{tableLayout:"fixed",minWidth:600},headerCell:{textAlign:"center",width:"calc(100% / 7)"},cell:{height:81,boxSizing:"border-box",padding:8,position:"relative"},divider:{borderLeft:"1px solid ".concat(e.palette.grey[500]),"&:before":{content:"attr(data-month)",position:"absolute",top:-12,fontWeight:500,textTransform:"capitalize"}},vehicleNameCell:{position:"absolute",width:200,height:81,boxSizing:"border-box",padding:8,right:"100%",textAlign:"left"},vehicleNameContainer:{backgroundColor:"".concat(e.palette.grey[300]," !important"),height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}}));function _(e){for(var t=e.tableResponse,n=e.startDate,a=e.onEditDateClick,c=t.scheduleScheme,r=t.vehicles,i=t.drivers,o=J(),l=E()(n).add(7,"days"),s=[],u=E()(n);u.isBefore(l);u.add(1,"day"))s.push(E()(u));return Object(N.jsx)("div",{className:o.root,children:Object(N.jsx)(R.a,{children:Object(N.jsxs)(W.a,{className:o.tableRoot,children:[Object(N.jsxs)(z.a,{children:[Object(N.jsx)(T.a,{className:o.vehicleNameCell}),s.map((function(e){return Object(N.jsx)(T.a,{className:o.headerCell,children:e.format("DD, dd")})}))]}),Object(N.jsx)(F.a,{children:r.map((function(e,t){return Object(N.jsxs)(L.a,{children:[Object(N.jsx)("th",{className:o.vehicleNameCell,children:Object(N.jsx)(d.a,{className:o.vehicleNameContainer,children:e.name})}),s.map((function(n){var r,d,l=null===(r=c.find((function(e){return E()(e.date).isSame(n,"day")})))||void 0===r?void 0:r.schedule.find((function(t){return t.vehicleId===e.id})),s=1===n.date(),u=i.find((function(e){return e.id===(null===l||void 0===l?void 0:l.driverId)}));return console.log(c),Object(N.jsx)(T.a,{"data-month":0===t?n.format("MMMM"):"",className:V()(o.cell,Object(M.a)({},o.divider,s)),onClick:(d=n,function(){a&&a(d)}),children:Object(N.jsx)(A,{driver:u,isMainDriver:null===l||void 0===l?void 0:l.isMainDriver})})}))]},e.id)}))})]})})})}var q=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule.selectedDate}));return Object(N.jsx)(_,{startDate:E()(t),tableResponse:I,onEditDateClick:function(){e(b({open:!0}))}})},G=n(155),H=n(156),K=n(157),Q=Object(o.a)((function(e){return{root:{display:"flex",justifyContent:"center"}}}));function U(e){var t=Q(),n=e.onArrowClick,a=function(e){return function(){n&&n({direction:e})}};return Object(N.jsx)("div",{className:t.root,children:Object(N.jsxs)(G.a,{display:"flex",justifyContent:"space-between",width:150,children:[Object(N.jsx)(D.a,{variant:"contained",onClick:a("prev"),children:Object(N.jsx)(H.a,{})}),Object(N.jsx)(D.a,{variant:"contained",onClick:a("next"),children:Object(N.jsx)(K.a,{})})]})})}var X=n(75),Z=n.n(X),$=n(88),ee={selectedDate:E()().toISOString()},te=Object(u.b)("schedule/fetchTableData",function(){var e=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,1e3)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ne=Object(u.c)({name:"schedule",initialState:ee,reducers:{setScheduleSliceState:function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}},extraReducers:function(e){e.addCase(te.fulfilled,(function(e,t){return Object(l.a)(Object(l.a)({},e),t.payload)}))}}),ae=ne.actions.setScheduleSliceState,ce=ne.reducer;var re=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule.selectedDate}));return Object(N.jsx)(U,{onArrowClick:function(n){var a=E()(t);"prev"===n.direction?a.subtract(1,"day"):a.add(1,"day"),e(ae({selectedDate:a.toISOString()}))}})},ie=n(89),oe=n.n(ie),de=Object(o.a)((function(e){return{root:{background:e.palette.grey[300],borderRadius:4},dateString:{display:"inline-block",width:120,textAlign:"center",cursor:"default",textTransform:"capitalize",fontWeight:500}}}));function le(e){var t=e.date,n=void 0===t?E()():t,a=e.onDateChange,c=de(),r=function(e){return function(){var t;t="prev"===e?E()(n).subtract(1,"month").set("date",1):E()(n).add(1,"month").set("date",1),a&&a(t)}};return Object(N.jsxs)("div",{className:c.root,children:[Object(N.jsx)(D.a,{onClick:r("prev"),children:Object(N.jsx)(H.a,{})}),Object(N.jsx)(oe.a,{className:c.dateString,date:n,format:"MMMM, YYYY"}),Object(N.jsx)(D.a,{onClick:r("next"),children:Object(N.jsx)(K.a,{})})]})}var se=Object(o.a)((function(e){return{root:{display:"flex",alignItems:"center"},title:{fontSize:20,fontWeight:600,marginRight:10}}}));function ue(e){var t=se(),n=e.date,a=e.onDateChange;return Object(N.jsxs)("div",{className:t.root,children:[Object(N.jsx)("span",{className:t.title,children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439"}),Object(N.jsx)(D.a,{variant:"contained",color:"secondary",children:"\u0421\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443"}),Object(N.jsx)(G.a,{marginLeft:"auto",children:Object(N.jsx)(le,{date:n,onDateChange:a})})]})}var je=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule.selectedDate}));return Object(N.jsx)(ue,{date:E()(t),onDateChange:function(t){e(ae({selectedDate:t.toISOString()}))}})},be=Object(o.a)((function(e){return{root:{display:"flex",flex:1,flexFlow:"column",padding:20,maxWidth:"100%",boxSizing:"border-box"}}}));function he(){var e=be();return Object(N.jsxs)(d.a,{elevation:3,className:e.root,children:[Object(N.jsx)(je,{}),Object(N.jsx)(q,{}),Object(N.jsx)(re,{}),Object(N.jsx)(k,{fullWidth:!0})]})}var Oe=function(){return Object(N.jsx)(he,{})},ve=Object(o.a)((function(e){return{root:{display:"flex",width:"100%",boxSizing:"border-box",padding:20,minWidth:780}}}));var xe=function(){var e=ve();return Object(N.jsx)("div",{className:e.root,children:Object(N.jsx)(Oe,{})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},me=(n(117),n(28)),pe=Object(me.c)({schedule:ce,editDailyScheduleModal:h}),ge=Object(u.a)({reducer:pe});i.a.render(Object(N.jsx)(c.a.StrictMode,{children:Object(N.jsx)(s.a,{store:ge,children:Object(N.jsx)(xe,{})})}),document.getElementById("root")),fe()}},[[118,1,2]]]);
//# sourceMappingURL=main.1a7d9a5f.chunk.js.map