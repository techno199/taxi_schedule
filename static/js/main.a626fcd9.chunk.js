(this.webpackJsonptaxi_schedule=this.webpackJsonptaxi_schedule||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(32),c=n.n(r),o=(n(106),n(5)),s=(n(107),n(19)),d=n(151),l=n(170),u=n(21),j=n(42),b=Object(j.c)({name:"editDailyScheduleModal",initialState:{open:!1},reducers:{setEditDailyScheduleModalSliceState:function(e,t){return Object(u.a)(Object(u.a)({},e),t.payload)}}}),h=b.actions.setEditDailyScheduleModalSliceState,v=b.reducer,f=n(61),O=n(166),x=n(167),m=n(171),p=n(172),g=n(173),C=n(174),S=n(163),y=n(168),D=n(175),I=n(176),w=n(4),k=Object(d.a)((function(e){return{formControl:{"&:not(:last-child)":{marginBottom:12}}}}));function N(e){var t=e.date,n=e.selectedDriverId,a=void 0===n?null:n,i=e.driverOptions,r=e.selectedStatusId,c=void 0===r?null:r,o=e.statusOptions,s=e.onDriverChange,d=e.onStatusChange,l=Object(f.a)(e,["date","selectedDriverId","driverOptions","selectedStatusId","statusOptions","onDriverChange","onStatusChange"]),j=k(),b=function(e){return function(t){switch(e){case"driver":s&&s(t.target.value);break;case"status":d&&d(t.target.value)}}};return Object(w.jsxs)(O.a,Object(u.a)(Object(u.a)({},l),{},{children:[Object(w.jsxs)(x.a,{children:["\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f \u043d\u0430 ",Object(w.jsx)("u",{children:t.format("LL")})]}),Object(w.jsx)(m.a,{children:Object(w.jsxs)(p.a,{children:[Object(w.jsxs)(g.a,{className:j.formControl,children:[Object(w.jsx)(C.a,{children:"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"}),Object(w.jsx)(S.a,{value:a,onChange:b("driver"),children:i&&i.map((function(e){return Object(w.jsx)(y.a,{value:e.id,children:e.name},e.id)}))})]}),Object(w.jsxs)(g.a,{children:[Object(w.jsx)(C.a,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(w.jsx)(S.a,{value:c,onChange:b("status"),children:o&&o.map((function(e){return Object(w.jsx)(y.a,{value:e.id,children:e.name},e.id)}))})]})]})}),Object(w.jsxs)(D.a,{children:[Object(w.jsx)(I.a,{variant:"contained",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(w.jsx)(I.a,{onClick:function(){return l.onClose&&l.onClose({},"backdropClick")},children:"\u041d\u0430\u0437\u0430\u0434"})]})]}))}var M=n(16),T=n.n(M);var z=function(e){var t=Object(s.b)(),n=Object(s.c)((function(e){return e})),a=n.editDailyScheduleModal,i=n.schedule;return Object(w.jsx)(N,Object(u.a)({date:T()(a.selectedDate),selectedDriverId:a.selectedDriverId,selectedStatusId:a.selectedStatusId,driverOptions:i.drivers,statusOptions:i.statuses,open:a.open,onDriverChange:function(e){t(h({selectedDriverId:e}))},onStatusChange:function(e){t(h({selectedStatusId:e}))},onClose:function(){t(h({open:!1}))}},e))},R=n(177),W=n(178),L=n(179),A=n(156),B=n(169),F=n(180),E=n(181),P=n(157),V=n(182),Y=n(59),J=n.n(Y),_=Object(d.a)((function(e){return{root:{height:"100%",display:"flex",cursor:"pointer",backgroundColor:function(e){var t;return"".concat(null===(t=e.status)||void 0===t?void 0:t.color," !important")}},wrapper:{display:"flex",flex:1,flexFlow:"column",transition:"background-color .2s ease !important",backgroundColor:"".concat(e.palette.grey[300]," !important"),"&:hover":{backgroundColor:"".concat(e.palette.grey[500]," !important"),"& .driver":{background:e.palette.grey[300]}}},driverNameRow:{height:32,"&:not(:last-child)":{borderBottom:"1px solid ".concat(e.palette.grey[400])},display:"flex",justifyContent:"center",alignItems:"center"},selectedText:{padding:"0 4px",borderRadius:4,fontWeight:500,transition:"all .2s ease",background:e.palette.grey[500],whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:70},status:{width:10,height:"100%"}}}));function q(e){var t=e.driver,n=e.status,a=e.isMainDriver,i=void 0===a||a,r=Object(f.a)(e,["driver","status","isMainDriver"]),c=_(e);return Object(w.jsx)(l.a,Object(u.a)(Object(u.a)({className:c.root},r),{},{children:Object(w.jsxs)("div",{className:c.wrapper,children:[Object(w.jsx)("div",{className:c.driverNameRow,children:i&&Object(w.jsx)("span",{className:J()(c.selectedText,"driver"),children:null===t||void 0===t?void 0:t.name})}),Object(w.jsx)("div",{className:c.driverNameRow,children:!i&&Object(w.jsx)("span",{className:J()(c.selectedText,"driver"),children:null===t||void 0===t?void 0:t.name})}),Object(w.jsx)("div",{className:c.driverNameRow,children:Object(w.jsx)("span",{className:c.selectedText,style:{background:null===n||void 0===n?void 0:n.color},children:null===n||void 0===n?void 0:n.name})})]})}))}var G=n(158),H=Object(d.a)((function(e){return{root:{padding:"20px 0",marginLeft:function(e){return e.vehicleNameCellWidth},position:"relative","& .MuiTableCell-root":{borderBottom:"none"}},tableRoot:{tableLayout:"fixed"},headerCell:{textAlign:"center",fontSize:"inherit",whiteSpace:"nowrap",width:function(e){return"calc(100% / ".concat(e.renderDaysCount,")")}},cell:{height:114,boxSizing:"border-box",padding:8,position:"relative",fontSize:"inherit"},divider:{borderLeft:"1px solid ".concat(e.palette.grey[500]),"&:before":{content:"attr(data-month)",position:"absolute",top:-12,fontWeight:500,textTransform:"capitalize"}},vehicleNameCell:{position:"absolute",width:function(e){return e.vehicleNameCellWidth},height:114,boxSizing:"border-box",padding:8,right:"100%",textAlign:"left"},vehicleNameContainer:{backgroundColor:"".concat(e.palette.grey[300]," !important"),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"},fab:{position:"absolute",right:e.spacing(2),bottom:e.spacing(2)}}}));function K(e){for(var t=e.scheduleScheme,n=e.vehicles,a=e.drivers,i=e.statuses,r=e.startDate,c=e.renderDaysCount,s=void 0===c?7:c,d=e.onEditDateClick,u=e.onReturnToTodayClick,j=H(e),b=T()().subtract(7,"days"),h=T()().add(7,"days"),v=r.isBefore(b)||r.isAfter(h),f=T()(r).add(s,"days"),O=[],x=T()(r);x.isBefore(f);x.add(1,"day"))O.push(T()(x));return Object(w.jsx)("div",{className:j.root,children:Object(w.jsxs)(R.a,{children:[Object(w.jsxs)(W.a,{className:j.tableRoot,children:[Object(w.jsxs)(L.a,{children:[Object(w.jsx)(A.a,{className:j.vehicleNameCell}),O.map((function(e){return Object(w.jsxs)(A.a,{className:j.headerCell,children:[Object(w.jsxs)("span",{children:[e.format("DD, dd")," "]}),e.isSame(T()(),"day")&&Object(w.jsx)(B.a,{label:"\u0441\u0435\u0433\u043e\u0434\u043d\u044f",size:"small",color:"secondary"})]})}))]}),Object(w.jsx)(F.a,{children:null===n||void 0===n?void 0:n.map((function(e,n){return Object(w.jsxs)(E.a,{children:[Object(w.jsx)("th",{className:j.vehicleNameCell,children:Object(w.jsx)(l.a,{className:j.vehicleNameContainer,children:e.name})}),O.map((function(r){var c,s,l,u,b,h=null===t||void 0===t||null===(c=t.find((function(e){return T()(e.date).isSame(r,"day")})))||void 0===c?void 0:c.schedule.find((function(t){return t.vehicleId===e.id})),v=1===r.date(),f=null===a||void 0===a?void 0:a.find((function(e){return e.id===(null===h||void 0===h?void 0:h.driverId)})),O=null===i||void 0===i?void 0:i.find((function(e){return e.id===(null===h||void 0===h?void 0:h.statusId)}));return Object(w.jsx)(A.a,{"data-month":0===n?r.format("MMMM"):"",className:J()(j.cell,Object(o.a)({},j.divider,v)),children:Object(w.jsx)(q,{driver:f,status:O,isMainDriver:null===h||void 0===h?void 0:h.isMainDriver,onClick:(s=r,l=e.id,u=null===f||void 0===f?void 0:f.id,b=null===O||void 0===O?void 0:O.id,function(){d&&d(s,l,u,b)})})})}))]},e.id)}))})]}),Object(w.jsx)(P.a,{in:v,children:Object(w.jsx)(V.a,{className:j.fab,color:"secondary",style:{position:"absolute"},onClick:u,children:Object(w.jsx)(G.a,{})})})]})})}var Q=n(27),U=n(159),X=n(79),Z=n.n(X),$=n(91),ee={vehicles:[{id:0,name:"Volkswagen Polo"},{id:1,name:"Volkswagen Polo"},{id:2,name:"Volkswagen Passat"}],drivers:[{id:0,name:"Driver 1"},{id:1,name:"Driver 2"}],statuses:[{id:0,name:"\u0412\u044b\u0445\u043e\u0434",color:"#4caf50"},{id:1,name:"\u041f\u0440\u043e\u0441\u0442\u043e\u0439",color:"#f44336"},{id:2,name:"\u0420\u0435\u043c\u043e\u043d\u0442",color:"#ff9800"}],scheduleScheme:[{date:"2021-02-25",schedule:[{driverId:0,vehicleId:0,statusId:0,isMainDriver:Math.random()<.5}]},{date:"2021-02-26",schedule:[{driverId:1,vehicleId:1,statusId:1,isMainDriver:Math.random()<.5}]},{date:"2021-02-27",schedule:[{driverId:1,vehicleId:2,statusId:2,isMainDriver:Math.random()<.5}]},{date:"2021-02-28",schedule:[{driverId:0,vehicleId:0,statusId:0,isMainDriver:Math.random()<.5},{driverId:1,vehicleId:2,statusId:0,isMainDriver:Math.random()<.5}]},{date:"2021-03-1",schedule:[{driverId:1,vehicleId:2,statusId:2,isMainDriver:Math.random()<.5}]}]},te={selectedDate:T()().toISOString()},ne=Object(j.b)("schedule/fetchTableData",function(){var e=Object($.a)(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){return e(ee)}),1e3)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ae=Object(j.c)({name:"schedule",initialState:te,reducers:{setScheduleSliceState:function(e,t){return Object(u.a)(Object(u.a)({},e),t.payload)}},extraReducers:function(e){e.addCase(ne.fulfilled,(function(e,t){return Object(u.a)(Object(u.a)({},e),t.payload)}))}}),ie=ae.actions.setScheduleSliceState,re=ae.reducer;var ce=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule})),n=t.selectedDate,a=t.vehicles,i=t.drivers,r=t.statuses,c=t.scheduleScheme,o=Object(Q.a)(),d=7,l=200;return Object(U.a)(o.breakpoints.down("lg"))&&(d=5),Object(U.a)(o.breakpoints.down("md"))&&(d=3,l=150),Object(U.a)(o.breakpoints.down("sm"))&&(d=2,l=100),Object(w.jsx)(K,{vehicles:a,drivers:i,statuses:r,scheduleScheme:c,renderDaysCount:d,vehicleNameCellWidth:l,startDate:T()(n),onEditDateClick:function(t,n,a,i){e(h({open:!0,selectedDate:t.toISOString(),selectedVehicleId:n,selectedDriverId:a,selectedStatusId:i}))},onReturnToTodayClick:function(){e(ie({selectedDate:T()().toISOString()}))}})},oe=n(160),se=n(161),de=n(162),le=Object(d.a)((function(e){return{root:{display:"flex",justifyContent:"center"}}}));function ue(e){var t=le(),n=e.onArrowClick,a=function(e){return function(){n&&n({direction:e})}};return Object(w.jsx)("div",{className:t.root,children:Object(w.jsxs)(oe.a,{display:"flex",justifyContent:"space-between",width:150,children:[Object(w.jsx)(I.a,{variant:"contained",onClick:a("prev"),children:Object(w.jsx)(se.a,{})}),Object(w.jsx)(I.a,{variant:"contained",onClick:a("next"),children:Object(w.jsx)(de.a,{})})]})})}var je=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule.selectedDate}));return Object(w.jsx)(ue,{onArrowClick:function(n){var a=T()(t);"prev"===n.direction?a.subtract(1,"day"):a.add(1,"day"),e(ie({selectedDate:a.toISOString()}))}})},be=n(92),he=n.n(be),ve=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"nowrap",background:e.palette.grey[300],borderRadius:4},dateString:{display:"flex",justifyContent:"center",alignItems:"center",width:120,textAlign:"center",cursor:"default",textTransform:"capitalize",fontWeight:500}}}));function fe(e){var t=e.date,n=void 0===t?T()():t,a=e.onDateChange,i=ve(),r=function(e){return function(){var t;t="prev"===e?T()(n).subtract(1,"month").set("date",1):T()(n).add(1,"month").set("date",1),a&&a(t)}};return Object(w.jsxs)("div",{className:i.root,children:[Object(w.jsx)(I.a,{onClick:r("prev"),children:Object(w.jsx)(se.a,{})}),Object(w.jsx)(he.a,{className:i.dateString,date:n,format:"MMMM, YYYY"}),Object(w.jsx)(I.a,{onClick:r("next"),children:Object(w.jsx)(de.a,{})})]})}var Oe=Object(d.a)((function(e){return{root:Object(o.a)({display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{flexFlow:"column"}),title:Object(o.a)({fontSize:20,fontWeight:600,marginRight:10},e.breakpoints.down("md"),{fontSize:14}),button:{fontSize:"inherit !important"},selector:Object(o.a)({marginLeft:"auto"},e.breakpoints.down("sm"),{marginLeft:"unset",marginTop:32})}}));function xe(e){var t=Oe(),n=e.date,a=e.onDateChange;return Object(w.jsxs)("div",{className:t.root,children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("span",{className:t.title,children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439"}),Object(w.jsx)(I.a,{className:t.button,variant:"contained",color:"secondary",children:"\u0421\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443"})]}),Object(w.jsx)("div",{className:t.selector,children:Object(w.jsx)(fe,{date:n,onDateChange:a})})]})}var me=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.schedule.selectedDate}));return Object(w.jsx)(xe,{date:T()(t),onDateChange:function(t){e(ie({selectedDate:t.toISOString()}))}})},pe=Object(d.a)((function(e){return{root:{display:"flex",flex:1,flexFlow:"column",padding:20,maxWidth:"100%",boxSizing:"border-box"}}}));function ge(){var e=pe();return Object(w.jsxs)(l.a,{elevation:3,className:e.root,children:[Object(w.jsx)(me,{}),Object(w.jsx)(ce,{}),Object(w.jsx)(je,{}),Object(w.jsx)(z,{fullWidth:!0})]})}var Ce=function(){var e=Object(s.b)();return Object(a.useEffect)((function(){e(ne({startDate:T()(),endDate:T()()}))}),[]),Object(w.jsx)(ge,{})},Se=Object(d.a)((function(e){return{root:Object(o.a)({display:"flex",width:"100%",boxSizing:"border-box",padding:20,maxWidth:1200},e.breakpoints.down("md"),{fontSize:12})}}));var ye=function(){var e=Se();return Object(w.jsx)("div",{className:e.root,children:Object(w.jsx)(Ce,{})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,183)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},Ie=(n(119),n(30)),we=Object(Ie.c)({schedule:re,editDailyScheduleModal:v}),ke=Object(j.a)({reducer:we});c.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(s.a,{store:ke,children:Object(w.jsx)(ye,{})})}),document.getElementById("root")),De()}},[[120,1,2]]]);
//# sourceMappingURL=main.a626fcd9.chunk.js.map