(this.webpackJsonptaxi_schedule=this.webpackJsonptaxi_schedule||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(31),c=n.n(i),o=(n(106),n(9)),d=(n(107),n(153)),l=n(165),s=n(25),u=n(23),j=n(41),b=Object(j.c)({name:"editDailyScheduleModal",initialState:{open:!1},reducers:{setEditDailyScheduleModalSliceState:function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)}}}),h=b.actions.setEditDailyScheduleModalSliceState,f=b.reducer,O=n(83),v=n(162),x=n(163),m=n(166),p=n(167),g=n(168),C=n(169),S=n(159),y=n(164),N=n(170),w=n(171),D=n(3);function k(e){var t=e.selectedDriverId,n=void 0===t?null:t,a=e.driverOptions,r=e.selectedStatusId,i=void 0===r?null:r,c=e.statusOptions,o=Object(O.a)(e,["selectedDriverId","driverOptions","selectedStatusId","statusOptions"]);return Object(D.jsxs)(v.a,Object(s.a)(Object(s.a)({},o),{},{children:[Object(D.jsx)(x.a,{children:"\u041d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),Object(D.jsx)(m.a,{children:Object(D.jsxs)(p.a,{children:[Object(D.jsxs)(g.a,{children:[Object(D.jsx)(C.a,{children:"\u0412\u043e\u0434\u0438\u0442\u0435\u043b\u044c"}),Object(D.jsx)(S.a,{value:n,children:a&&a.map((function(e){return Object(D.jsx)(y.a,{value:e.id,children:e.name})}))})]}),Object(D.jsxs)(g.a,{children:[Object(D.jsx)(C.a,{children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(D.jsx)(S.a,{value:i,children:c&&c.map((function(e){return Object(D.jsx)(y.a,{value:e.id,children:e.name})}))})]})]})}),Object(D.jsxs)(N.a,{children:[Object(D.jsx)(w.a,{variant:"contained",color:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(D.jsx)(w.a,{onClick:function(){return o.onClose&&o.onClose({},"backdropClick")},children:"\u041d\u0430\u0437\u0430\u0434"})]})]}))}var I=function(e){var t=Object(u.b)(),n=Object(u.c)((function(e){return e.editDailyScheduleModal}));return Object(D.jsx)(k,Object(s.a)(Object(s.a)({},e),{},{open:n.open,onClose:function(){t(h({open:!1}))}}))},M={vehicles:[{id:0,name:"Volkswagen Polo"},{id:1,name:"Volkswagen Polo"},{id:2,name:"Volkswagen Passat"}],drivers:[{id:0,name:"Driver 1"},{id:1,name:"Driver 2"}],scheduleScheme:[{date:"2021-02-25",schedule:[{driverId:0,vehicleId:0}]},{date:"2021-02-26",schedule:[{driverId:1,vehicleId:1}]},{date:"2021-02-27",schedule:[{driverId:1,vehicleId:2}]}]},z=n(172),W=n(173),R=n(174),T=n(154),F=n(175),L=n(176),A=Object(d.a)((function(e){return{root:{display:"flex",flexFlow:"column",backgroundColor:"".concat(e.palette.grey[300]," !important")},driverNameRow:{height:32,"&:first-child":{borderBottom:"1px solid ".concat(e.palette.grey[400])},display:"flex",justifyContent:"center",alignItems:"center"},driverName:{padding:"0 4px",borderRadius:4,fontWeight:500,background:e.palette.grey[500],whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",maxWidth:70}}}));function P(e){var t=e.driver,n=e.isMainDriver,a=void 0===n||n,r=A();return Object(D.jsxs)(l.a,{className:r.root,children:[Object(D.jsx)("div",{className:r.driverNameRow,children:a&&Object(D.jsx)("span",{className:r.driverName,children:null===t||void 0===t?void 0:t.name})}),Object(D.jsx)("div",{className:r.driverNameRow,children:!a&&Object(D.jsx)("span",{className:r.driverName,children:null===t||void 0===t?void 0:t.name})})]})}var B=n(17),E=n.n(B),Y=n(87),V=n.n(Y),J=Object(d.a)((function(e){return{root:{padding:"20px 0",marginLeft:function(e){return e.vehicleNameCellWidth},position:"relative","& .MuiTableCell-root":{borderBottom:"none"}},tableRoot:{tableLayout:"fixed"},headerCell:{textAlign:"center",fontSize:"inherit",width:function(e){return"calc(100% / ".concat(e.renderDaysCount,")")}},cell:{height:81,boxSizing:"border-box",padding:8,position:"relative",fontSize:"inherit"},divider:{borderLeft:"1px solid ".concat(e.palette.grey[500]),"&:before":{content:"attr(data-month)",position:"absolute",top:-12,fontWeight:500,textTransform:"capitalize"}},vehicleNameCell:{position:"absolute",width:function(e){return e.vehicleNameCellWidth},height:81,boxSizing:"border-box",padding:8,right:"100%",textAlign:"left"},vehicleNameContainer:{backgroundColor:"".concat(e.palette.grey[300]," !important"),height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}}}));function _(e){for(var t=e.tableResponse,n=e.startDate,a=e.renderDaysCount,r=void 0===a?7:a,i=e.onEditDateClick,c=t.scheduleScheme,d=t.vehicles,s=t.drivers,u=J(e),j=E()(n).add(r,"days"),b=[],h=E()(n);h.isBefore(j);h.add(1,"day"))b.push(E()(h));return Object(D.jsx)("div",{className:u.root,children:Object(D.jsx)(z.a,{children:Object(D.jsxs)(W.a,{className:u.tableRoot,children:[Object(D.jsxs)(R.a,{children:[Object(D.jsx)(T.a,{className:u.vehicleNameCell}),b.map((function(e){return Object(D.jsx)(T.a,{className:u.headerCell,children:e.format("DD, dd")})}))]}),Object(D.jsx)(F.a,{children:d.map((function(e,t){return Object(D.jsxs)(L.a,{children:[Object(D.jsx)("th",{className:u.vehicleNameCell,children:Object(D.jsx)(l.a,{className:u.vehicleNameContainer,children:e.name})}),b.map((function(n){var a,r,d=null===(a=c.find((function(e){return E()(e.date).isSame(n,"day")})))||void 0===a?void 0:a.schedule.find((function(t){return t.vehicleId===e.id})),l=1===n.date(),j=s.find((function(e){return e.id===(null===d||void 0===d?void 0:d.driverId)}));return Object(D.jsx)(T.a,{"data-month":0===t?n.format("MMMM"):"",className:V()(u.cell,Object(o.a)({},u.divider,l)),onClick:(r=n,function(){i&&i(r)}),children:Object(D.jsx)(P,{driver:j,isMainDriver:null===d||void 0===d?void 0:d.isMainDriver})})}))]},e.id)}))})]})})})}var q=n(27),G=n(155);var H=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.schedule.selectedDate})),n=Object(q.a)(),a=7,r=200;return Object(G.a)(n.breakpoints.down("md"))&&(a=3,r=150),Object(G.a)(n.breakpoints.down("sm"))&&(a=2,r=100),Object(D.jsx)(_,{renderDaysCount:a,vehicleNameCellWidth:r,startDate:E()(t),tableResponse:M,onEditDateClick:function(){e(h({open:!0}))}})},K=n(156),Q=n(157),U=n(158),X=Object(d.a)((function(e){return{root:{display:"flex",justifyContent:"center"}}}));function Z(e){var t=X(),n=e.onArrowClick,a=function(e){return function(){n&&n({direction:e})}};return Object(D.jsx)("div",{className:t.root,children:Object(D.jsxs)(K.a,{display:"flex",justifyContent:"space-between",width:150,children:[Object(D.jsx)(w.a,{variant:"contained",onClick:a("prev"),children:Object(D.jsx)(Q.a,{})}),Object(D.jsx)(w.a,{variant:"contained",onClick:a("next"),children:Object(D.jsx)(U.a,{})})]})})}var $=n(75),ee=n.n($),te=n(88),ne={selectedDate:E()().toISOString()},ae=Object(j.b)("schedule/fetchTableData",function(){var e=Object(te.a)(ee.a.mark((function e(t){var n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout(e,1e3)}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),re=Object(j.c)({name:"schedule",initialState:ne,reducers:{setScheduleSliceState:function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)}},extraReducers:function(e){e.addCase(ae.fulfilled,(function(e,t){return Object(s.a)(Object(s.a)({},e),t.payload)}))}}),ie=re.actions.setScheduleSliceState,ce=re.reducer;var oe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.schedule.selectedDate}));return Object(D.jsx)(Z,{onArrowClick:function(n){var a=E()(t);"prev"===n.direction?a.subtract(1,"day"):a.add(1,"day"),e(ie({selectedDate:a.toISOString()}))}})},de=n(89),le=n.n(de),se=Object(d.a)((function(e){return{root:{display:"flex",flexWrap:"nowrap",background:e.palette.grey[300],borderRadius:4},dateString:{display:"flex",justifyContent:"center",alignItems:"center",width:120,textAlign:"center",cursor:"default",textTransform:"capitalize",fontWeight:500}}}));function ue(e){var t=e.date,n=void 0===t?E()():t,a=e.onDateChange,r=se(),i=function(e){return function(){var t;t="prev"===e?E()(n).subtract(1,"month").set("date",1):E()(n).add(1,"month").set("date",1),a&&a(t)}};return Object(D.jsxs)("div",{className:r.root,children:[Object(D.jsx)(w.a,{onClick:i("prev"),children:Object(D.jsx)(Q.a,{})}),Object(D.jsx)(le.a,{className:r.dateString,date:n,format:"MMMM, YYYY"}),Object(D.jsx)(w.a,{onClick:i("next"),children:Object(D.jsx)(U.a,{})})]})}var je=Object(d.a)((function(e){return{root:Object(o.a)({display:"flex",alignItems:"center"},e.breakpoints.down("sm"),{flexFlow:"column"}),title:Object(o.a)({fontSize:20,fontWeight:600,marginRight:10},e.breakpoints.down("md"),{fontSize:14}),button:{fontSize:"inherit !important"},selector:Object(o.a)({marginLeft:"auto"},e.breakpoints.down("sm"),{marginLeft:"unset",marginTop:32})}}));function be(e){var t=je(),n=e.date,a=e.onDateChange;return Object(D.jsxs)("div",{className:t.root,children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("span",{className:t.title,children:"\u041a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c \u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0439"}),Object(D.jsx)(w.a,{className:t.button,variant:"contained",color:"secondary",children:"\u0421\u043f\u0438\u0441\u0430\u0442\u044c \u0430\u0440\u0435\u043d\u0434\u0443"})]}),Object(D.jsx)("div",{className:t.selector,children:Object(D.jsx)(ue,{date:n,onDateChange:a})})]})}var he=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.schedule.selectedDate}));return Object(D.jsx)(be,{date:E()(t),onDateChange:function(t){e(ie({selectedDate:t.toISOString()}))}})},fe=Object(d.a)((function(e){return{root:{display:"flex",flex:1,flexFlow:"column",padding:20,maxWidth:"100%",boxSizing:"border-box"}}}));function Oe(){var e=fe();return Object(D.jsxs)(l.a,{elevation:3,className:e.root,children:[Object(D.jsx)(he,{}),Object(D.jsx)(H,{}),Object(D.jsx)(oe,{}),Object(D.jsx)(I,{fullWidth:!0})]})}var ve=function(){return Object(D.jsx)(Oe,{})},xe=Object(d.a)((function(e){return{root:Object(o.a)({display:"flex",width:"100%",boxSizing:"border-box",padding:20,maxWidth:1200},e.breakpoints.down("md"),{fontSize:12})}}));var me=function(){var e=xe();return Object(D.jsx)("div",{className:e.root,children:Object(D.jsx)(ve,{})})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},ge=(n(119),n(28)),Ce=Object(ge.c)({schedule:ce,editDailyScheduleModal:f}),Se=Object(j.a)({reducer:Ce});c.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(u.a,{store:Se,children:Object(D.jsx)(me,{})})}),document.getElementById("root")),pe()}},[[120,1,2]]]);
//# sourceMappingURL=main.df536077.chunk.js.map